name = "core-cloudflare-manager-api"
main = "src/index.ts"
compatibility_date = "2024-06-01"
compatibility_flags = ["nodejs_compat"]

# Secrets to configure (use: wrangler secret put <NAME>)
# CLOUDFLARE_API_TOKEN - API token for accessing Cloudflare API
# CLOUDFLARE_ACCOUNT_ID - Your Cloudflare account ID
# WORKER_API_KEY - Bearer token for authenticating requests to this proxy worker

# D1 Database Binding for Audit Logs
[[d1_databases]]
binding = "AUDIT_LOGS_DB"
database_name = "audit-logs-db"
database_id = "your-database-id-here" # Replace with actual D1 database ID after creation
migrations_dir = "migrations"

# Analytics Engine Binding for Observability
[[analytics_engine_datasets]]
binding = "OBSERVABILITY_AE"

# Environment configuration
[env.production]
name = "core-cloudflare-manager-api"

[env.staging]
name = "core-cloudflare-manager-api-staging"

# Build configuration
[build]
command = ""

# Enable node.js compatibility for cloudflare SDK
node_compat = true
